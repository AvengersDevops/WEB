@page "/Login"
@using Task = System.Threading.Tasks.Task
@using AvengersWeb.Repositories
@inject NavigationManager NavigationManager
<PageTitle>Login</PageTitle>

<h1>Login</h1>

<div>
    <input type="text" class="form-control" placeholder="Phone" @bind="email"/>
    <input type="password" class="form-control" placeholder="Password" @bind="password"/>
    <button class="btn btn-primary" @onclick="LoginClick">Login</button>
</div>

@code {
    
    String? email;
    String? password;

    private async Task LoginClick()
    {
        if (!string.IsNullOrEmpty(email) && !string.IsNullOrEmpty(password))
        {
            UserRepository UserRepository = new UserRepository(); 
            var login = await UserRepository.Login(email, password);
            
            if (login != null)
            {
                NavigationManager.NavigateTo("/"); //Needs testing, path is correct?
            }
            
        }
    }
}